<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>SortFilterPlugin</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="../jquery-ui-1.12.1/jquery-ui.min.css">
    <script src="../jquery-ui-1.12.1/external/jquery/jquery.js"></script>
    <script src="../jquery-ui-1.12.1/jquery-ui.js"></script>
    <script src="../jquery-ui-1.12.1/datepicker-ru.js"></script>
</head>
<body>
    <form action="" method="post" id="f3" novalidate="novalidate">
        <fieldset>
            <legend>Search</legend>
            <input id="searchable" name="searchable" type="text">
            <select id="search_col" class="valid" aria-invalid="false" name="column"><option selected="">All</option><option value="uid">uid</option><option value="username">username</option><option value="firstname">firstname</option><option value="lastname">lastname</option><option value="pass">pass</option><option value="register">register</option><option value="email">email</option><option value="age">age</option><option value="accesslevel">accesslevel</option><option value="timestamp">timestamp</option><option value="status">status</option><option value="city">city</option><option value="messages">messages</option><option value="ads">ads</option><option value="labels">labels</option><option value="desc">desc</option></select>
            <input type="submit" id="btn5" value="Search">
        </fieldset>
        <table border="1" width="600px" id="t1">
            <thead>
            <tr><th class="headtable">id<span class="ar_up" style="color: black">▲</span><br><span class="ar_down" style="color: black">▼</span></th><th class="headtable">uid<span class="ar_up" style="color: black">▲</span><br><span class="ar_down" style="color: black">▼</span></th><th class="headtable">username<span class="ar_up" style="color: black">▲</span><br><span class="ar_down" style="color: black">▼</span></th><th class="headtable">firstname<span class="ar_up" style="color: black">▲</span><br><span class="ar_down" style="color: black">▼</span></th><th class="headtable">lastname<span class="ar_up" style="color: black">▲</span><br><span class="ar_down" style="color: black">▼</span></th><th class="headtable">pass<span class="ar_up" style="color: black">▲</span><br><span class="ar_down" style="color: black">▼</span></th><th class="headtable">register<span class="ar_up" style="color: black">▲</span><br><span class="ar_down" style="color: black">▼</span></th><th class="headtable">email<span class="ar_up" style="color: black">▲</span><br><span class="ar_down" style="color: black">▼</span></th><th class="headtable">age<span class="ar_up" style="color: black">▲</span><br><span class="ar_down" style="color: black">▼</span></th><th class="headtable">accesslevel<span class="ar_up" style="color: black">▲</span><br><span class="ar_down" style="color: black">▼</span></th><th class="headtable">timestamp<span class="ar_up" style="color: black">▲</span><br><span class="ar_down" style="color: black">▼</span></th><th class="headtable">status<span class="ar_up" style="color: black">▲</span><br><span class="ar_down" style="color: black">▼</span></th><th class="headtable">city<span class="ar_up" style="color: black">▲</span><br><span class="ar_down" style="color: black">▼</span></th><th class="headtable">messages<span class="ar_up" style="color: black">▲</span><br><span class="ar_down" style="color: black">▼</span></th><th class="headtable">ads<span class="ar_up" style="color: black">▲</span><br><span class="ar_down" style="color: black">▼</span></th><th class="headtable">labels<span class="ar_up" style="color: black">▲</span><br><span class="ar_down" style="color: black">▼</span></th><th class="headtable">desc<span class="ar_up" style="color: black">▲</span><br><span class="ar_down" style="color: black">▼</span></th><th class="deleterows"><p>Delete rows</p><label for="select_all" style="font-weight:normal; font-size:10px">Select all</label><input id="select_all" type="checkbox"></th></tr>
            </thead>
            <tr class="id_49"><td class="id">49</td><td class="uid"><input class="editable uid 49 VARCHAR" type="text" disabled="" value="n53mrULQ7r5kGGN"></td><td class="username"><input class="editable username 49 VARCHAR" type="text" disabled="" value="ak"></td><td class="firstname"><input class="editable firstname 49 VARCHAR" type="text" disabled="" value="Alex"></td><td class="lastname"><input class="editable lastname 49 VARCHAR" type="text" disabled="" value="Kakkos"></td><td class="pass"><input class="editable pass 49 VARCHAR" type="text" disabled="" value="YJNO7Elx8ybFeT8JfYETgAbRdEFbs1E6q/OG5CWwwlyfnXREWVtssjro5ihTFEvtmm3IIFElXFHHCga8asrGUv"></td><td class="register"><input class="editable register 49 VARCHAR" type="text" disabled="" value=""></td><td class="email"><input class="editable email 49 VARCHAR" type="text" disabled="" value="asdf@wdsgr.com"></td><td class="age"><input class="editable age 49 INT" type="text" disabled="" value=""></td><td class="accesslevel"><input class="editable accesslevel 49 INT" type="text" disabled="" value="10"></td><td class="timestamp"><input class="editable timestamp 49 INT" type="text" disabled="" value="2017-08-10 13:17:37"></td><td class="status"><input class="editable status 49 INT" type="text" disabled="" value="1"></td><td class="city"><input class="editable city 49 VARCHAR" type="text" disabled="" value="Athens, Central Athens, Greece"></td><td class="messages"><input class="editable messages 49 INT" type="text" disabled="" value="68"></td><td class="ads"><input class="editable ads 49 INT" type="text" disabled="" value="1"></td><td class="labels"><input class="editable labels 49 INT" type="text" disabled="" value="11"></td><td class="desc"><textarea class="editable desc 49 TEXT" type="text" disabled="">some text</textarea></td><td><input class="del 49" type="checkbox"><a href="#" onclick="return false;" class="del_link 49"></a></td></tr><tr class="id_56"><td class="id">56</td><td class="uid"><input class="editable uid 56 VARCHAR" type="text" disabled="" value="avgDXj7MH1A59SOD"></td><td class="username"><input class="editable username 56 VARCHAR" type="text" disabled="" value="Araik"></td><td class="firstname"><input class="editable firstname 56 VARCHAR" type="text" disabled="" value="araik"></td><td class="lastname"><input class="editable lastname 56 VARCHAR" type="text" disabled="" value="Gevorkyan"></td><td class="pass"><input class="editable pass 56 VARCHAR" type="text" disabled="" value="8WacdXmq3Ldcx44gLEndhgpinflsMpq7ai1slNwYz15RI37KUZF9HcQ8qc8U7oAcWO4TCdEeU2KYyOYwIRnbth"></td><td class="register"><input class="editable register 56 VARCHAR" type="text" disabled="" value=""></td><td class="email"><input class="editable email 56 VARCHAR" type="text" disabled="" value="arisgev84@gmail.com"></td><td class="age"><input class="editable age 56 INT" type="text" disabled="" value=""></td><td class="accesslevel"><input class="editable accesslevel 56 INT" type="text" disabled="" value="10"></td><td class="timestamp"><input class="editable timestamp 56 INT" type="text" disabled="" value="2017-08-16 19:16:53"></td><td class="status"><input class="editable status 56 INT" type="text" disabled="" value="1"></td><td class="city"><input class="editable city 56 VARCHAR" type="text" disabled="" value="Харьков, Харьковская область, Украина"></td><td class="messages"><input class="editable messages 56 INT" type="text" disabled="" value="89"></td><td class="ads"><input class="editable ads 56 INT" type="text" disabled="" value="0"></td><td class="labels"><input class="editable labels 56 INT" type="text" disabled="" value="9"></td><td class="desc"><textarea class="editable desc 56 TEXT" type="text" disabled="">eimai poli kalo paidi para poli kalo super paidi</textarea></td><td><input class="del 56" type="checkbox"><a href="#" onclick="return false;" class="del_link 56"></a></td></tr><tr class="id_57"><td class="id">57</td><td class="uid"><input class="editable uid 57 VARCHAR" type="text" disabled="" value="avg5Xj6MH8A59SOD"></td><td class="username"><input class="editable username 57 VARCHAR" type="text" disabled="" value="Superman"></td><td class="firstname"><input class="editable firstname 57 VARCHAR" type="text" disabled="" value="vangelis"></td><td class="lastname"><input class="editable lastname 57 VARCHAR" type="text" disabled="" value="papadopoulos"></td><td class="pass"><input class="editable pass 57 VARCHAR" type="text" disabled="" value=""></td><td class="register"><input class="editable register 57 VARCHAR" type="text" disabled="" value=""></td><td class="email"><input class="editable email 57 VARCHAR" type="text" disabled="" value=""></td><td class="age"><input class="editable age 57 INT" type="text" disabled="" value=""></td><td class="accesslevel"><input class="editable accesslevel 57 INT" type="text" disabled="" value="1"></td><td class="timestamp"><input class="editable timestamp 57 INT" type="text" disabled="" value="2017-08-28 12:15:38"></td><td class="status"><input class="editable status 57 INT" type="text" disabled="" value="0"></td><td class="city"><input class="editable city 57 VARCHAR" type="text" disabled="" value=""></td><td class="messages"><input class="editable messages 57 INT" type="text" disabled="" value="0"></td><td class="ads"><input class="editable ads 57 INT" type="text" disabled="" value="0"></td><td class="labels"><input class="editable labels 57 INT" type="text" disabled="" value="0"></td><td class="desc"><textarea class="editable desc 57 TEXT" type="text" disabled=""></textarea></td><td><input class="del 57" type="checkbox"><a href="#" onclick="return false;" class="del_link 57"></a></td></tr><tr class="id_58"><td class="id">58</td><td class="uid"><input class="editable uid 58 VARCHAR" type="text" disabled="" value="WSK1PxXPXHv65PEO"></td><td class="username"><input class="editable username 58 VARCHAR" type="text" disabled="" value="mas"></td><td class="firstname"><input class="editable firstname 58 VARCHAR" type="text" disabled="" value="Alexander"></td><td class="lastname"><input class="editable lastname 58 VARCHAR" type="text" disabled="" value=""></td><td class="pass"><input class="editable pass 58 VARCHAR" type="text" disabled="" value="91t6NE+C0gYO2skTvZhicwTLf630UOf1TvU4LNXsfhWxzg/7AO/nacrf79RahLJAvwD33GBk+wz6Z3TAOBIFEi"></td><td class="register"><input class="editable register 58 VARCHAR" type="text" disabled="" value=""></td><td class="email"><input class="editable email 58 VARCHAR" type="text" disabled="" value="mas"></td><td class="age"><input class="editable age 58 INT" type="text" disabled="" value=""></td><td class="accesslevel"><input class="editable accesslevel 58 INT" type="text" disabled="" value="1"></td><td class="timestamp"><input class="editable timestamp 58 INT" type="text" disabled="" value="2017-08-28 15:31:26"></td><td class="status"><input class="editable status 58 INT" type="text" disabled="" value="1"></td><td class="city"><input class="editable city 58 VARCHAR" type="text" disabled="" value="Новый Свет, Крым"></td><td class="messages"><input class="editable messages 58 INT" type="text" disabled="" value="0"></td><td class="ads"><input class="editable ads 58 INT" type="text" disabled="" value="0"></td><td class="labels"><input class="editable labels 58 INT" type="text" disabled="" value="0"></td><td class="desc"><textarea class="editable desc 58 TEXT" type="text" disabled=""></textarea></td><td><input class="del 58" type="checkbox"><a href="#" onclick="return false;" class="del_link 58"></a></td></tr><tr class="id_59"><td class="id">59</td><td class="uid"><input class="editable uid 59 VARCHAR" type="text" disabled="" value="Hbk5L1v5PINt96rU"></td><td class="username"><input class="editable username 59 VARCHAR" type="text" disabled="" value="test1"></td><td class="firstname"><input class="editable firstname 59 VARCHAR" type="text" disabled="" value="vasia"></td><td class="lastname"><input class="editable lastname 59 VARCHAR" type="text" disabled="" value="vasiok"></td><td class="pass"><input class="editable pass 59 VARCHAR" type="text" disabled="" value="FO8hrkpNt1js0G3CF6zNWQUd85s5lTQK+sFNEoEOyIp8cFZm+rXuLYm7QB4JMTX46x7kh5608pMD8GxzF0R4jK"></td><td class="register"><input class="editable register 59 VARCHAR" type="text" disabled="" value=""></td><td class="email"><input class="editable email 59 VARCHAR" type="text" disabled="" value="test1@mail.ru"></td><td class="age"><input class="editable age 59 INT" type="text" disabled="" value=""></td><td class="accesslevel"><input class="editable accesslevel 59 INT" type="text" disabled="" value="1"></td><td class="timestamp"><input class="editable timestamp 59 INT" type="text" disabled="" value="2017-08-28 16:10:26"></td><td class="status"><input class="editable status 59 INT" type="text" disabled="" value="0"></td><td class="city"><input class="editable city 59 VARCHAR" type="text" disabled="" value="Москва, Россия"></td><td class="messages"><input class="editable messages 59 INT" type="text" disabled="" value="1"></td><td class="ads"><input class="editable ads 59 INT" type="text" disabled="" value="0"></td><td class="labels"><input class="editable labels 59 INT" type="text" disabled="" value="1"></td><td class="desc"><textarea class="editable desc 59 TEXT" type="text" disabled="">eto matya stranitsa i tut ia pishu o sibe</textarea></td><td><input class="del 59" type="checkbox"><a href="#" onclick="return false;" class="del_link 59"></a></td></tr><tr class="id_60"><td class="id">60</td><td class="uid"><input class="editable uid 60 VARCHAR" type="text" disabled="" value="3IxI1oYV5IPf945y"></td><td class="username"><input class="editable username 60 VARCHAR" type="text" disabled="" value="test2"></td><td class="firstname"><input class="editable firstname 60 VARCHAR" type="text" disabled="" value="araik"></td><td class="lastname"><input class="editable lastname 60 VARCHAR" type="text" disabled="" value="tyytytyty"></td><td class="pass"><input class="editable pass 60 VARCHAR" type="text" disabled="" value="209Cc80Gr1XPHG6+a2YPqw2WmBajvToXjuexK0TzcylBtT6GcmOM1QZCLQ/Ot4ZyFjnF1L+NBHnLYgkmJ8Dr61"></td><td class="register"><input class="editable register 60 VARCHAR" type="text" disabled="" value=""></td><td class="email"><input class="editable email 60 VARCHAR" type="text" disabled="" value="arisgev84@gmail.com"></td><td class="age"><input class="editable age 60 INT" type="text" disabled="" value=""></td><td class="accesslevel"><input class="editable accesslevel 60 INT" type="text" disabled="" value="1"></td><td class="timestamp"><input class="editable timestamp 60 INT" type="text" disabled="" value="2017-08-28 16:11:53"></td><td class="status"><input class="editable status 60 INT" type="text" disabled="" value="0"></td><td class="city"><input class="editable city 60 VARCHAR" type="text" disabled="" value=""></td><td class="messages"><input class="editable messages 60 INT" type="text" disabled="" value="0"></td><td class="ads"><input class="editable ads 60 INT" type="text" disabled="" value="0"></td><td class="labels"><input class="editable labels 60 INT" type="text" disabled="" value="0"></td><td class="desc"><textarea class="editable desc 60 TEXT" type="text" disabled=""></textarea></td><td><input class="del 60" type="checkbox"><a href="#" onclick="return false;" class="del_link 60"></a></td></tr><tr class="id_72"><td class="id">72</td><td class="uid"><input class="editable uid 72 VARCHAR" type="text" disabled="" value="6VatEDhkt55i0EKI"></td><td class="username"><input class="editable username 72 VARCHAR" type="text" disabled="" value="blogger"></td><td class="firstname"><input class="editable firstname 72 VARCHAR" type="text" disabled="" value=""></td><td class="lastname"><input class="editable lastname 72 VARCHAR" type="text" disabled="" value=""></td><td class="pass"><input class="editable pass 72 VARCHAR" type="text" disabled="" value="DjTG2pcbFfbSrkmlsdBMRAaOEjpQYKEjtB0TJ2xSeb9jG9jrIyBK099/uMghwpHb7cQscOnO7tX640JjwnkYaP"></td><td class="register"><input class="editable register 72 VARCHAR" type="text" disabled="" value=""></td><td class="email"><input class="editable email 72 VARCHAR" type="text" disabled="" value="blogger@mail.ru"></td><td class="age"><input class="editable age 72 INT" type="text" disabled="" value=""></td><td class="accesslevel"><input class="editable accesslevel 72 INT" type="text" disabled="" value="1"></td><td class="timestamp"><input class="editable timestamp 72 INT" type="text" disabled="" value="2017-08-28 18:13:49"></td><td class="status"><input class="editable status 72 INT" type="text" disabled="" value="0"></td><td class="city"><input class="editable city 72 VARCHAR" type="text" disabled="" value=""></td><td class="messages"><input class="editable messages 72 INT" type="text" disabled="" value="0"></td><td class="ads"><input class="editable ads 72 INT" type="text" disabled="" value="0"></td><td class="labels"><input class="editable labels 72 INT" type="text" disabled="" value="0"></td><td class="desc"><textarea class="editable desc 72 TEXT" type="text" disabled=""></textarea></td><td><input class="del 72" type="checkbox"><a href="#" onclick="return false;" class="del_link 72"></a></td></tr>
        </table>
        <fieldset>
            <legend>Add/Delete rows</legend>
            <input type="submit" value="Insert row" name="ins_row" id="but3">
            <input type="submit" value="Delete checked row(s)" name="del_row" id="but4">
        </fieldset>

    </form>
    <script>
        $(()=> {
            $.fn.filterSorting = function (options) {

                var opt = $.extend({}, $.fn.filterSorting.default, options);
                var methods = {
                    changeColor: function (color) {
                        $('.searchMark').css('background', color)
                    }
                };
                var args = arguments[1];
                var self = this;
                var tbodyHtml = $('<tbody />');
//console.log(self);
                console.log(opt);
                self.each(function (index, element) {
                    if(options in methods){
                        methods[options].apply(null,[args]);
                    }else {

                        $(this).find('td').each(function (i, td) {
                            if(opt.search[1].value == 'All' || $(this).hasClass(opt.search[1].value)) {
                                var re = {};

                                re = new RegExp("(" + opt.search[0].value + ")", "gi");
                                if (re.test($(this).html())) {
                                    opt.counter++;
                                    $htmlTemp = $(this).html();
//                                $(this).html("<mark>" + opt.search[0].value + "</mark>");
                                    $(this).addClass('searchMark');
                                    $(this).closest('tr').css('background', opt.background).appendTo(tbodyHtml);
                                }
                            }
                        });
                    }
                });

                if(opt.counter){
                    self.closest('tbody').remove();
                    tbodyHtml.appendTo($('#t1'));
                }else{
                    if(typeof opt.search != 'undefined')
                        alert('Не найдено!');
                }

            };

            $.fn.filterSorting.default = {background: 'pink', counter: 0};


            $('#f3').on('submit', (e) => {
                $params = $(e.target).serializeArray();
                e.preventDefault();

                $('tbody tr').filterSorting({search: $params});
                $('tbody tr').filterSorting('changeColor', '#f00');
            });


        });
    </script>
</body>
</html>