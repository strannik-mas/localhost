{"version":3,"sources":["../../mod_3/lab3.js"],"names":["dataBook","id","title","author","price","Book","React","Component","constructor","props","state","selected","handleClick","bind","componentDidMount","e","preventDefault","setState","render","BookWithoutPrice","Form","handleChange","target","value","AddBookForm","handleSubmit","isValidBook","book","name","push","console","log","alert","App","map","item","ReactDOM","document","getElementById","Like","counter","prevState","collection","getElementsByClassName","i","length"],"mappings":"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","file":"lab3.js","sourcesContent":["const dataBook = [\n    {id: 1, title: \"Book 1\", author: \"Author 1\", price: 500},\n    {id: 5, title: \"Book 2\", author: \"Author 2\", price: 1200},\n    {id: 6, title: \"Book 3\", author: \"Author 3\", price: null},\n];\n\nclass Book extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {selected: false};\n        this.handleClick = this.handleClick.bind(this);\n    }\n\n    componentDidMount(){\n        // console.log(\"--\", \"компонент смонтирован\");\n    }\n\n    handleClick(e){\n        e.preventDefault();\n        this.setState({selected:!this.state.selected});\n    }\n\n    render(){\n        const price = this.props.price ? <strong>{this.props.price}</strong> : <del>&nbsp;</del>;\n\n        return <div className={\"book\" + (this.state.selected ? \" book_selected\" : \" book_default\")}>\n            <h3>{this.props[\"title\"]}</h3>\n            <img src={'http://placehold.it/100x120?text='+this.props[\"title\"]} alt=\"\"/>\n            <p>Автор: {this.props[\"author\"]}</p>\n            <p>Цена: {price} руб.</p>\n            <a href=\"#\" onClick={this.handleClick}>Сравнить</a>&nbsp;\n            <a href=\"#\">В корзину</a>\n            <div className=\"likes\"></div>\n        </div>;\n    }\n}\n\nclass BookWithoutPrice extends React.Component{\n    constructor(props){\n        super(props);\n    }\n\n    render(){\n        const price = this.props.price ? <strong>{this.props.price}</strong> : <del>&nbsp;</del>;\n\n        return <div className=\"book book_default\">\n            <h3>{this.props[\"title\"]}</h3>\n            <img src={'http://placehold.it/100x120?text='+this.props[\"title\"]} alt=\"\"/>\n            <p>Автор: {this.props[\"author\"]}</p>\n            <p>Цена: {price} руб.</p>\n        </div>;\n    }\n}\n\nclass Form extends React.Component {\n    constructor(props){\n        super(props);\n        this.state = {title: \"\"};\n        this.handleChange = this.handleChange.bind(this);\n    }\n    handleChange(e){\n        this.setState({title: e.target.value});\n\n    }\n    render(){\n        return <label><input type=\"text\" onChange={this.handleChange} value={this.state.title}/>{this.state.title}</label>\n    }\n}\n\nclass AddBookForm extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            id:0,\n            title: '',\n            author: '',\n            price: null\n        };\n        this.handleChange = this.handleChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n    }\n\n    isValidBook(book){\n        return book.id && book.title && book.author && true;\n    }\n\n    handleChange(e){\n        // console.log(e.target.value);\n        this.setState({\n            [e.target.name]:e.target.value\n        });\n        // console.log(this.state);\n    }\n\n    handleSubmit(e){\n        e.preventDefault();\n        if(this.isValidBook(this.state)){\n            dataBook.push(this.state);\n            this.setState({\n                id:0,\n                title: '',\n                author: '',\n                price: null\n            });\n            console.log(dataBook);\n        }else alert(\"Заполните поля\");\n    }\n\n    render(){\n        return <form action=\"\" onSubmit={this.handleSubmit}>\n            <div>id<input type=\"text\" name=\"id\" onChange={this.handleChange}/></div>\n            <div>Название<input type=\"text\" name=\"title\" onChange={this.handleChange}/></div>\n            <div>Авторы<input type=\"text\" name=\"author\" onChange={this.handleChange}/></div>\n            <div>Цена<input type=\"text\" name=\"price\" onChange={this.handleChange}/></div>\n            <div><input type=\"submit\" value=\"Добавить\"/></div>\n        </form>\n    }\n}\n\nclass App extends React.Component{\n    constructor(props){\n        super(props);\n    }\n    render(){\n        return <div className=\"books\">\n            {/*<Form />*/}\n            <AddBookForm />\n            {\n                dataBook.map(item => {\n                    return item.price ?\n                    <Book title={item.title} author={item.author} price={item.price} key={item.id}/>\n                        : <BookWithoutPrice title={item.title} author={item.author} price={item.price} key={item.id}/>\n                })\n            }\n        </div>\n    }\n}\n\nReactDOM.render(\n    <App/>,\n    document.getElementById('root')\n);\n\n/*for likes*/\nclass Like extends React.Component{\n    constructor(props) {\n        super(props);\n        this.state = {counter: 0};\n\n        // Это связывание необходимо делать работой `this` в функции обратного вызова\n        this.handleClick = this.handleClick.bind(this);\n    }\n\n    handleClick(e) {\n        e.preventDefault();\n        this.setState(prevState => ({\n            counter: prevState.counter+1\n        }));\n    }\n\n    render(){\n        return (\n            <div>\n                <a href=\"#22\" onClick={this.handleClick}>\n                    likes me\n                </a>\n                <mark>  {this.state.counter}</mark>\n            </div>\n        );\n    }\n\n}\n\nvar collection = document.getElementsByClassName('likes');\n// console.log(collection);\nfor(let i=0; i<collection.length; i++){\n    ReactDOM.render(\n        <Like />\n        ,\n        collection[i]\n    );\n}"]}